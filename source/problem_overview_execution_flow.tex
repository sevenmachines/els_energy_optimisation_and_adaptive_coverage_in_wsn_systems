\paragraph{Task execution flow}
With these roles, we can describe an example of one possible flow of a composite task execution as follows;
\begin{enumerate}
	\item An external agent $\varExternalAgent{}{}$ sends a composite task $\varCompositeTask{}{}$ of type $\varCompositeTaskType{}{}$ to an agent $\varAgent{a}{} \in \functionTaskResponsibilities{}{}$; $\varAgent{a}{} = \functionSinkRole{}{}$.
	
	\item $\varAgent{a}{}$ decomposes the composite task into atomic tasks $\setAtomicTaskInstance{}{} = \lbrace \varAtomicTask{1}{}, \varAtomicTask{2}{}, \varAtomicTask{3}{} \rbrace$.
	
	\item $\varAgent{a}{}$ can allocate atomic tasks to agents in its neighbourhood, including itself, $\functionNeighbourhoodSignature{a}{} = \lbrace \varAgent{a}{}, \varAgent{b}{}, \varAgent{c}{}, \varAgent{d}{} \rbrace$.
	\begin{enumerate}
		\item $\varAgent{a}{}$ allocates $\varAtomicTask{1}{}$ to the agent $\varAgent{b}{}$ which completes the task and returns the results to $\varAgent{a}{}$; $\varAgent{b}{} = \functionDetectorRole{1}{}$.
		\item $\varAgent{a}{}$ allocates $\varAtomicTask{2}{}$ to an agent $\varAgent{c}{}$, which then reallocates it to another agent $\varAgent{d}{}$. $\varAgent{d}{}$ completes the task, and returns the results  to $\varAgent{c}{}$, which in turn, returns them to $\varAgent{a}{}$; $\varAgent{d}{} = \functionDetectorRole{2}{}$, $\varAgent{c}{} = \functionRelayRole{2}{2}{d}$
		\item $\varAgent{a}{}$ allocates $\varAtomicTask{3}{}$ to itself and completes it; $\varAgent{a}{} = \functionDetectorRole{3}{}$.
	\end{enumerate}
	
	\item $\varAgent{s}{}$ aggregates the results of the atomic tasks in $\setAtomicTaskInstance{}{}$ and returns them to the external agent $\varExternalAgent{}{}$.
\end{enumerate}

\example{Task flow in an ocean-based WSN}{
  An agent acting as a sink in an ocean bay deployment receives a composite task  from an on-shore base station. It decomposes it into atomic tasks $\lbrace \varAtomicTask{i}{} \rbrace_{i=1}^{10}$ to measure the salinity in $10$ different locations. It then sends these task requests to other agents in the bay, who are close to the desired locations, $\functionTaskDemandPoint{i}{}$,  for the salinity measurements. The agents use their sensors to make the measurements, and return the results to the sink, which then aggregates the data and broadcasts it back to the base station.
}
