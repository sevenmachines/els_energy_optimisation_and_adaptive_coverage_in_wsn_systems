
\label{problem_overview}

\paragraph{Nodes}
A WSN system is comprised of a set of interconnected hardware \textit{nodes}. Each node is equipped with the following components\footnote{See \cite{muhammad_r_ahmed_2012_1072589}};
\begin{enumerate}
	\item a microcontroller for computation.
	\item sensors for measuring some property of the environment such as temperature or radiation levels.
	\item memory storage for holding the results of measurements and knowledge about the system.
	\item a battery as power storage required for operating functions, sensor measurements, and communication.
	\item a solar panel for recharging the battery.
	\item  a wireless transceiver for  transmitting and receiving messages from other nodes.
\end{enumerate}

Each node has one \textit{agent}, a software controller that instructs its actions. For simplicity, we will use the term 'agent' to refer to both the software controller and the hardware node it controls.

\paragraph{Resources}
\label{section:overview:resources}
%%%%%%%%%%%%%%%%%%%%%
\newcommand{\varResourceType}[2]{\varSymbol{RT}{#1}{#2}}
\newcommand{\setResourceType}[2]{\setSymbol{RT}{#1}{#2}}
\newcommand{\formalResourceType}[2]{
	\functionFormal{type_r}
	{\setResource{}{}}
	{\setResourceType{}{}}
}
\newcommand{\functionResourceType}[2]{
	\functionSignature{type_r}
	{\varResource{}{}}}

%%%%%%%%%%%%%%%%%%%
Agents will have to use \textit{resources} $\varResource{}{}$ to complete tasks and for general operations. These resources are of one of the types $\varResourceType{}{}$ shown below, given by the mapping $\formalResourceType{}{}$.

\begin{itemize}
	\item \textit{compute resources}, used in activating a sensor and taking a reading. Each agent has the same, fixed, amount of compute resource, which it must share amongst its current tasks. The less allocated to a task, the lower the quality of its' completion. 
	\item \textit{memory resources}, this restricts the amount of knowledge an agent can have at any one time. Each agent has the same, fixed, amount of this resource.
	\item \textit{energy resources}, which are required to transmit and receive task requests, results, and knowledge between agents. Each agent has the same, fixed, maximum amount of energy in its battery at system initialisation. Each action uses some of this energy, which is gradually replenished by a solar panel. Over time, the maximum energy storage decreases as the battery wears and degrades.
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\formalDeployment}[2]{\functionFormal{deploy}{\setAgents{}{}}{(\setRealNumbersNonNegative{}{} \times \setRealNumbersNonNegative{}{})}}
\newcommand{\functionDeployment}[2]{
	\ifx \\1\\
	\functionSignature{deploy}{\setAgents{}{}}
	\else
	\functionSignature{deploy}{#1}
	\fi
}

\newcommand{\formalTransmissionRange}[2]{
	\functionFormal{range}
	{\powerSetAgents{}{} \times (\setRealNumbersNonNegative{}{} \times \setRealNumbersNonNegative{}{})}
	{\setRealNumbersNonNegative{}{}}
}
\newcommand{\functionTransmissionRange}[2]{\functionSignature{range}{\setAgents{}{}}}
%%%%%%%%%%%%%%%%%
\paragraph{Distribution}
\label{section:task_and_resources:distribution}
The WSN is deployed over a finite geographical area, with agents (and tasks) randomly located within this bounded area, such as occurs in an aerial deployment \citep{Kumar2013}.  The network structure formed may be flat or hierarchical, with or without clustering, dependent on the choice of protocol used \citep{Carlos-Mancilla2016b}. The map is covered by a unit-normalised 2-dimensional Cartesian coordinate system\footnote{The algorithms that follow are equally valid for other coordinate systems and more dimensions but we use the simplest implementable here for clarity of presentation.},  $(\setRealNumbersUnit{}{} \times \setRealNumbersUnit{}{})$\footnote{The coordinate system is scaled such that the maximum distance between any components in the system will be $\sqrt{2}$. This is for simplicity in further definitions and equations but is not a requirement for applicability of the algorithms presented.}. An agents' \textit{deployment} is then its mapping to a specific $(x, y)$ location in this coordinate system; $\formalDeployment{}{}$

A agents' hardware has a maximum distance it can effectively communicate with other agents \cite{Radman201}. This range can be increased by dedicating more of its battery power to broadcasting \cite{Padmanabh2008, Song2009}. The effective range is also effected by conditions and obstructions close to the agents location. We define the agents' \textit{transmission range} by $\formalTransmissionRange{}{}$.  


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\formalTaskDemandPoint}[2]{
	\functionFormal{demand}
	{\setAtomicTask  {}{}}{\tupleLocation{}{}}
}
\newcommand{\functionTaskDemandPoint}[2]{\functionSignature{demand}{\varAtomicTask{}{}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Tasks}
\label{section:task_and_resources:tasks}
Some agents will have sets of atomic tasks called \textit{composite tasks} allocated to them from an external source, throughout the systems' lifetime. We term these agents \textit{sinks} (see Section \ref{XXX}). Composite tasks are decomposed into atomic tasks by sinks, with each atomic task then being either executed by the sink, or allocated to other agents to complete or relay further.

Agents execute \textit{atomic tasks}, individual sensor measurements, which are typed. Each atomic task targets a sensor measurement at a specific location, the tasks' \textit{demand point}, $\formalTaskDemandPoint{}{}$. The further away the agent is from this point, the less value the task has to the system.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\functionRequiredResourcesSymbol}[2]{
	\functionSymbol{requiredres}
}
\newcommand{\formalRequiredResources}[2]{
	\functionFormal{\functionRequiredResourcesSymbol{}{}}
	{\setAtomicTaskType{}{} \times \setResource{}{}}
	{\setRealNumbersNonNegative{}{}}
}
\newcommand{\functionRequiredResources}[2]{
	\functionSignature{\functionRequiredResourcesSymbol{}{}}{\varAtomicTaskType{}{}, \varResource{}{}}
}
\newcommand{\functionRequiredResourcesInstance}[2]{
	\functionSignature{\functionRequiredResourcesSymbol{}{}}
	{\functionAtomicTaskMapping{\varAtomicTask{}{}}{}, \functionResourceType{}{}}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Atomic tasks have a \textit{resources requirement}, a mapping from the type of the task to the set of resources it requires to be completed optimally, $\formalRequiredResources{}{}$. 

\paragraph{System task execution flow}

At a high-level, the flow of task execution is as follows,
\begin{enumerate}
	\item An agent receives a tasks from an external agent
	\item The agent executes or allocates these tasks to other agents in the system, which may also re-allocate them.
	\item Agents' execute tasks by taking measurements using its sensors.
	\item The task results are transmitted back to the agent that allocated the task.
	\item The results are re-transmitted back to allocating agents until they reach the initial agent.
	\item The initial agent aggregates all the task results and transmits them to the external agent.
\end{enumerate}

\paragraph{Resources available to tasks}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\functionAgentResourcesSymbol}[2]{
	\functionSymbol{agentres}
}
\newcommand{\formalAgentResources}[2]{
	\functionFormal{\functionAgentResourcesSymbol{}{}}
	{\setAgents{}{} \times \setResource{}{}}
	{\setRealNumbersNonNegative{}{}}
}
\newcommand{\functionAgentResources}[2]{
	\functionSignature{\functionAgentResourcesSymbol{}{}}{\varAgent{}{}, \varResource{}{}}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
The \textit{agent resources} function maps each agent and each resource to the maximum amount of that resource that the agent can utilise to complete tasks, $\formalAgentResources{}{}$. e.g. the maximum capacity of the agents' battery, or size of its memory storage.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\functionTaskResourceAllocationSymbol}[2]{
	\functionSymbol{taskres}
}
\newcommand{\formalTaskResourceAllocation}[2]{
	\functionFormal{\functionTaskResourceAllocationSymbol{}{}}
	{\setAgents{}{} \times \setAtomicTaskType{}{} \times \setResourceType{}{}}
	{\setRealNumbersNonNegative{}{}}
}
\newcommand{\functionTaskResourceAllocation}[2]{
	\functionSignature{\functionTaskResourceAllocationSymbol{}{}}
	{\varAgent{}{}, \varAtomicTask{}{}, \varResourceType{}{}}
}
\newcommand{\functionTaskResourceAllocationInstance}[2]{
	\functionSignature{\functionTaskResourceAllocationSymbol{}{}}
	{\varAgent{}{}, \varAtomicTask{}{}, \functionResourceType{}{}}
}


The \text{task resource allocation} maps each agent, type of atomic task, and resource, to the amount of the resource it has assigned to completing tasks of that type, $\formalTaskResourceAllocation{}{}$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\functionAgentAvailableResourcesSymbol}[2]{
	\functionSymbol{availres}
}
\newcommand{\formalAgentAvailableResources}[2]{
	\functionFormal{\functionAgentAvailableResourcesSymbol{}{}}
	{\setAgents{}{} \times \setResource{}{}}
	{\setRealNumbersNonNegative{}{}}
}
\newcommand{\functionAgentAvailableResources}[2]{
	\functionSignature{\functionAgentAvailableResourcesSymbol{}{}}
	{\varAgent{}{}, \varResource{}{}}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\todo[inline]{are the task assigned resources still available?}
The \textit{agent available resources} function maps each agent and each resource to the current amount of that resource that the agent can utilise to complete tasks, $\formalAgentAvailableResources{}{}$. e.g. the power currently left in the agents' battery, or free memory.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\functionFractionalAgentResourcesSymbol}[2]{
	\functionSymbol{fracres_{\varTime{}{}}}
}
\newcommand{\formalAgentResourcesAvailable}[2]{
	\functionFormal{\functionFractionalAgentResourcesSymbol{}{}}
	{\setAgents{}{} \times \setResource{}{}}
	{\setRealNumbersUnit{}{}}
}
\newcommand{\functionFractionalAgentResources}[2]{
	\functionSignature{\functionFractionalAgentResourcesSymbol{}{}}
	{\varAgent{}{}, \varResource{}{}}
}
\newcommand{\functionFractionalAgentEnergy}[2]{
	\functionSignature{\functionFractionalAgentResourcesSymbol{}{}}
	{\varAgent{}{}, \varResource{energy}{}}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
At a specific point in time $\varTime{}{}$, the \textit{fractional agent resources} function maps agents and resources to the amount of each resource it has available to utilise for tasks, as a fraction of the resources' maximum capacity for that agent, $\formalAgentResourcesAvailable{}{}$. So that,
\begin{equation}
	\functionFractionalAgentResources{}{}
	= \frac
	{\functionAgentAvailableResources{}{}}
	{\functionAgentResources{}{}}
\end{equation}

\example{Task flow in an ocean-based WSN}{}

