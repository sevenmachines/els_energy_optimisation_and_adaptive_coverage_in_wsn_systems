%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\formalAgentEnergyAvailable}[2]{
	\functionFormal{fae}
	{\setAgents{}{}}
	{\setRealNumbersUnit{}{}}
}
\newcommand{\functionAgentEnergyAvailable}[2]{
	\functionSignature{fae_{\varTime{}{}}}
	{\varAgent{}{}}
}


\subsection{Energy in the system}
\newcommand{\functionEnergyVariability}[2]{
\ifx \\#1\\
	\functionSignature{rev_{\varTime{}{}}}
	{\setAgents{}{}}
\else
	\functionSignature{rev_{\varTime{}{}}}{#1}
\fi
}
\newcommand{\functionEnergyInverseVariability}[2]{
	\ifx \\#1\\
	\functionSignature{eiv_{\varTime{}{}}}
	{\setAgents{}{}}
	\else
	\functionSignature{eiv_{\varTime{}{}}}{#1}
	\fi
}
\newcommand{\functionEnergyAvailable}[2]{
\ifx \\#1\\
	\functionSignature{ea_{\varTime{}{}}}{\setAgents{}{}}
\else
	\functionSignature{ea_{\varTime{}{}}}{#1}
\fi
}
\todo[inline]{PROBLEM - ENERGY}
\subsubsection{Availability of energy}

The \textit{fractional agent energy} maps the an agent to its available energy, as a fraction of the batteries' maximum capacity, $\formalAgentEnergyAvailable{}{}$. We can then specify the \textit{fractional energy availability}, as the sum of the agent energy of all agents in a set $\setAgents{}{}$.
	\begin{equation}
		\functionEnergyAvailable{}{} 
		= \dfrac{\sum_{\forall \varAgent{}{} \in \setAgents{}{}} \functionAgentEnergyAvailable{\varAgent{i}{}}{}}
		{\funcSize{\setAgents{}{}}}
	\end{equation}
To optimise for distribution of energy usage, we want to minimise the variance\footnote{Using the standard definition of variability of a discrete set $X$, $\sigma^2(X) = \frac{\sum (x_i - \bar{x})^2}{\funcSize{X}-1}$} of $\functionAgentEnergyAvailable{}{}$. As we look to optimise by maximising across multiple goals, and the values of $\functionAgentEnergyAvailable{}{}$ are bounded by $[0, 1]$, we can rephrase this as maximising the distance between the variance and the maximum possible, $1/4$. So we specify the \textit{relative energy variability},
	\begin{equation}     	
		\functionEnergyVariability{}{} 
		= \frac{1}{4} - \sigma^2(
			\lbrace \functionAgentEnergyAvailable{}{}
			\rbrace_{\forall \varAgent{}{} \in \setAgents{}{}}
		)
	\end{equation}


